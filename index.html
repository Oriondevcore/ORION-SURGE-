<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#22d3ee">
  <title>ORION SURGE</title>
  <link rel="manifest" href="manifest.json">
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>
  
  <script type="module">
   import React, { useState, useEffect, useRef } from 'react';
import { Zap, TrendingUp, Users, Trophy, Settings, DollarSign } from 'lucide-react';

const OrionSurge = () => {
  const [gameState, setGameState] = useState('BETTING');
  const [multiplier, setMultiplier] = useState(1.00);
  const [countdown, setCountdown] = useState(6);
  const [crashPoint, setCrashPoint] = useState(null);
  const [roundId, setRoundId] = useState(1);
  const [username, setUsername] = useState('');
  const [isLoggedIn, setIsLoggedIn] = useState(false);
  const [balance, setBalance] = useState(1000);
  const [betAmount1, setBetAmount1] = useState(100);
  const [betAmount2, setBetAmount2] = useState(40);
  const [activeBet1, setActiveBet1] = useState(null);
  const [activeBet2, setActiveBet2] = useState(null);
  const [autoCashout1, setAutoCashout1] = useState(null);
  const [autoCashout2, setAutoCashout2] = useState(null);
  const [recentCrashes, setRecentCrashes] = useState([]);
  const [totalWagered, setTotalWagered] = useState(0);
  const [houseProfit, setHouseProfit] = useState(0);
  const [showSettings, setShowSettings] = useState(false);
  const startTimeRef = useRef(null);

  const generateCrashPoint = () => {
    const random = Math.random();
    const result = Math.floor((99) / (1 - random)) / 100;
    return Math.max(1.05, Math.min(100.00, result));
  };

  const placeBet = (slot) => {
    if (gameState !== 'BETTING') return;
    const amount = slot === 1 ? betAmount1 : betAmount2;
    if (amount < 40 || amount > 2000 || amount > balance) return;
    
    setBalance(prev => prev - amount);
    setTotalWagered(prev => prev + amount);
    if (slot === 1) setActiveBet1({ amount, cashedOut: false });
    else setActiveBet2({ amount, cashedOut: false });
  };

  const cashOut = (slot) => {
    if (gameState !== 'PLAYING') return;
    const bet = slot === 1 ? activeBet1 : activeBet2;
    if (!bet || bet.cashedOut) return;
    
    const winAmount = Math.floor(bet.amount * multiplier);
    setBalance(prev => prev + winAmount);
    
    if (slot === 1) setActiveBet1(prev => ({ ...prev, cashedOut: true, cashoutMultiplier: multiplier, winAmount }));
    else setActiveBet2(prev => ({ ...prev, cashedOut: true, cashoutMultiplier: multiplier, winAmount }));
  };

  useEffect(() => {
    if (gameState === 'PLAYING') {
      if (activeBet1 && !activeBet1.cashedOut && autoCashout1 && multiplier >= autoCashout1) cashOut(1);
      if (activeBet2 && !activeBet2.cashedOut && autoCashout2 && multiplier >= autoCashout2) cashOut(2);
    }
  }, [multiplier, gameState]);

  useEffect(() => {
    let interval;
    if (gameState === 'BETTING') {
      interval = setInterval(() => {
        setCountdown(prev => {
          if (prev <= 1) {
            setCrashPoint(generateCrashPoint());
            setGameState('PLAYING');
            setMultiplier(1.00);
            startTimeRef.current = Date.now();
            return 6;
          }
          return prev - 1;
        });
      }, 1000);
    } else if (gameState === 'PLAYING') {
      interval = setInterval(() => {
        const elapsed = (Date.now() - startTimeRef.current) / 1000;
        const newMultiplier = Math.round(Math.pow(1.1, elapsed * 2) * 100) / 100;
        setMultiplier(newMultiplier);
        
        if (newMultiplier >= crashPoint || newMultiplier >= 300) {
          setGameState('CRASHED');
          let houseTake = 0;
          if (activeBet1 && !activeBet1.cashedOut) houseTake += activeBet1.amount;
          if (activeBet2 && !activeBet2.cashedOut) houseTake += activeBet2.amount;
          setHouseProfit(prev => prev + houseTake);
          
          setTimeout(() => {
            setRecentCrashes(prev => [crashPoint, ...prev.slice(0, 19)]);
            setTimeout(() => {
              setActiveBet1(null);
              setActiveBet2(null);
              setRoundId(prev => prev + 1);
              setCountdown(6);
              setGameState('BETTING');
            }, 2000);
          }, 1000);
        }
      }, 50);
    }
    return () => clearInterval(interval);
  }, [gameState, roundId, crashPoint]);

  if (!isLoggedIn) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-4">
        <div className="bg-slate-800/50 backdrop-blur-xl border-2 border-blue-500/30 rounded-2xl p-8 max-w-md w-full">
          <div className="text-center mb-8">
            <Zap className="w-24 h-24 text-cyan-400 mx-auto mb-4 animate-pulse" style={{filter: 'drop-shadow(0 0 25px rgba(34,211,238,0.8))'}} />
            <h1 className="text-4xl font-bold text-white mb-2">ORION SURGE</h1>
            <p className="text-cyan-400 text-sm font-semibold">AI AMPLIFIES. I CREATE.</p>
          </div>
          <input
            type="text"
            placeholder="Enter Username"
            value={username}
            onChange={(e) => setUsername(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && username.trim() && setIsLoggedIn(true)}
            className="w-full px-4 py-3 mb-4 bg-slate-900/50 border border-blue-500/30 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-cyan-400"
          />
          <button onClick={() => username.trim() && setIsLoggedIn(true)} className="w-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white font-bold py-3 rounded-lg">
            START PLAYING
          </button>
          <p className="text-xs text-slate-400 text-center mt-4">Starting balance: 1,000 tokens ü™ô</p>
        </div>
      </div>
    );
  }

  const BetSlot = ({slot, betAmount, setBetAmount, activeBet, autoCashout, setAutoCashout}) => (
    <div className="bg-slate-800/50 border border-blue-500/30 rounded-xl p-4">
      <h3 className="text-cyan-400 font-bold mb-3 flex items-center gap-2">
        <DollarSign className="w-4 h-4" />Bet Slot {slot}
      </h3>
      <div className="space-y-3">
        <div>
          <label className="text-xs text-slate-400 block mb-1">Bet Amount</label>
          <input type="number" value={betAmount} onChange={(e) => setBetAmount(Math.max(40, Math.min(2000, parseInt(e.target.value) || 40)))} disabled={gameState !== 'BETTING' || activeBet} className="w-full px-3 py-2 bg-slate-900/50 border border-slate-700 rounded text-white disabled:opacity-50" min="40" max="2000" />
          <div className="flex gap-1 mt-2">
            {[100, 200, 500, 1000].map(amt => (
              <button key={amt} onClick={() => setBetAmount(amt)} disabled={gameState !== 'BETTING' || activeBet} className="flex-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs disabled:opacity-50">{amt}</button>
            ))}
          </div>
        </div>
        <div>
          <label className="text-xs text-slate-400 block mb-1">Auto Cashout</label>
          <input type="number" value={autoCashout || ''} onChange={(e) => setAutoCashout(e.target.value ? parseFloat(e.target.value) : null)} placeholder="e.g., 2.50" disabled={gameState !== 'BETTING' || activeBet} className="w-full px-3 py-2 bg-slate-900/50 border border-slate-700 rounded text-white placeholder-slate-600 disabled:opacity-50" />
        </div>
        {!activeBet ? (
          <button onClick={() => placeBet(slot)} disabled={gameState !== 'BETTING'} className="w-full bg-gradient-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 disabled:from-slate-700 disabled:to-slate-600 text-white font-bold py-3 rounded-lg">
            {gameState === 'BETTING' ? 'PLACE BET' : 'WAIT...'}
          </button>
        ) : !activeBet.cashedOut && gameState === 'PLAYING' ? (
          <button onClick={() => cashOut(slot)} className="w-full bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-500 hover:to-yellow-400 text-white font-bold py-3 rounded-lg animate-pulse">
            CASH OUT {Math.floor(activeBet.amount * multiplier)} ü™ô
          </button>
        ) : (
          <div className="w-full bg-slate-700 text-slate-400 font-bold py-3 rounded-lg text-center">{activeBet.cashedOut ? '‚úÖ Cashed Out' : '‚è≥ Waiting...'}</div>
        )}
      </div>
    </div>
  );

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white pb-16">
      <div className="bg-slate-900/80 border-b border-blue-500/30 px-4 py-3">
        <div className="max-w-7xl mx-auto flex items-center justify-between">
          <div className="flex items-center gap-3">
            <Zap className="w-8 h-8 text-cyan-400" />
            <div>
              <h1 className="text-xl font-bold">ORION SURGE</h1>
              <p className="text-xs text-slate-400">Round #{roundId}</p>
            </div>
          </div>
          <div className="flex items-center gap-6">
            <div className="text-right">
              <p className="text-xs text-slate-400">Balance</p>
              <p className="text-lg font-bold text-yellow-400">{balance.toFixed(2)} ü™ô</p>
            </div>
            <button onClick={() => setShowSettings(!showSettings)} className="p-2 hover:bg-slate-800 rounded-lg"><Settings className="w-5 h-5" /></button>
          </div>
        </div>
      </div>

      <div className="bg-slate-800/30 px-4 py-2 border-b border-slate-700/50">
        <div className="max-w-7xl mx-auto flex items-center gap-2 overflow-x-auto">
          <TrendingUp className="w-4 h-4 text-slate-400" />
          <div className="flex gap-2">
            {recentCrashes.length === 0 ? <span className="text-xs text-slate-500">No history yet...</span> : 
              recentCrashes.map((crash, idx) => (
                <span key={idx} className={`text-xs font-bold px-2 py-1 rounded ${crash < 2 ? 'bg-red-500/20 text-red-400' : crash < 10 ? 'bg-yellow-500/20 text-yellow-400' : 'bg-green-500/20 text-green-400'}`}>
                  {crash.toFixed(2)}x
                </span>
              ))
            }
          </div>
        </div>
      </div>

      <div className="max-w-7xl mx-auto p-4 grid grid-cols-1 lg:grid-cols-3 gap-4">
        <div className="lg:col-span-2 space-y-4">
          <div className="bg-slate-800/50 border-2 border-blue-500/30 rounded-2xl p-6 relative min-h-[500px] flex flex-col items-center justify-center">
            {gameState === 'BETTING' && (
              <div className="text-center">
                <Zap className="w-32 h-32 text-cyan-400 mx-auto mb-6 animate-pulse" style={{filter: 'drop-shadow(0 0 30px rgba(34,211,238,0.8))'}} />
                <h2 className="text-5xl font-bold text-cyan-400 mb-4 animate-pulse">PLACE YOUR BETS</h2>
                <div className="text-8xl font-bold text-yellow-400">{countdown}</div>
                <p className="text-slate-400 mt-4">Next round starting...</p>
              </div>
            )}
            {(gameState === 'PLAYING' || gameState === 'CRASHED') && (
              <div className="text-center">
                <Zap className={`w-48 h-48 mx-auto mb-8 ${gameState === 'CRASHED' ? 'text-red-500 animate-ping' : 'text-cyan-400'}`} style={{filter: `drop-shadow(0 0 ${Math.min(multiplier * 5, 50)}px rgba(34,211,238,0.8))`, transform: `scale(${Math.min(1 + (multiplier - 1) * 0.1, 2)})`}} />
                <div className={`text-9xl font-bold mb-4 ${gameState === 'CRASHED' ? 'text-red-500' : 'text-yellow-400'}`} style={{textShadow: `0 0 ${Math.min(multiplier * 3, 40)}px currentColor`}}>{multiplier.toFixed(2)}x</div>
                {gameState === 'CRASHED' && <div className="text-3xl font-bold text-red-400 animate-pulse">üí• CRASHED! üí•</div>}
                <div className="mt-8 space-y-2">
                  {activeBet1 && (
                    <div className={`px-6 py-3 rounded-lg ${activeBet1.cashedOut ? 'bg-green-500/20 border border-green-500' : 'bg-blue-500/20 border border-blue-500'}`}>
                      <p className={`${activeBet1.cashedOut ? 'text-green-400' : 'text-white'} font-bold`}>
                        {activeBet1.cashedOut ? `Slot 1: Cashed out ${activeBet1.winAmount} at ${activeBet1.cashoutMultiplier.toFixed(2)}x! üéâ` : `Slot 1: ${activeBet1.amount} ‚Üí ${Math.floor(activeBet1.amount * multiplier)} tokens`}
                      </p>
                    </div>
                  )}
                  {activeBet2 && (
                    <div className={`px-6 py-3 rounded-lg ${activeBet2.cashedOut ? 'bg-green-500/20 border border-green-500' : 'bg-blue-500/20 border border-blue-500'}`}>
                      <p className={`${activeBet2.cashedOut ? 'text-green-400' : 'text-white'} font-bold`}>
                        {activeBet2.cashedOut ? `Slot 2: Cashed out ${activeBet2.winAmount} at ${activeBet2.cashoutMultiplier.toFixed(2)}x! üéâ` : `Slot 2: ${activeBet2.amount} ‚Üí ${Math.floor(activeBet2.amount * multiplier)} tokens`}
                      </p>
                    </div>
                  )}
                </div>
              </div>
            )}
            {gameState === 'CRASHED' && (
              <div className="absolute top-4 right-4 bg-red-500/20 border border-red-500 rounded-lg px-4 py-2">
                <p className="text-red-400 font-bold">Crashed at {crashPoint?.toFixed(2)}x</p>
              </div>
            )}
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <BetSlot slot={1} betAmount={betAmount1} setBetAmount={setBetAmount1} activeBet={activeBet1} autoCashout={autoCashout1} setAutoCashout={setAutoCashout1} />
            <BetSlot slot={2} betAmount={betAmount2} setBetAmount={setBetAmount2} activeBet={activeBet2} autoCashout={autoCashout2} setAutoCashout={setAutoCashout2} />
          </div>
        </div>

        <div className="space-y-4">
          <div className="bg-slate-800/50 border border-blue-500/30 rounded-xl p-4">
            <h3 className="text-cyan-400 font-bold mb-3 flex items-center gap-2"><Trophy className="w-4 h-4" />Your Stats</h3>
            <div className="space-y-2 text-sm">
              <div className="flex justify-between"><span className="text-slate-400">Username:</span><span className="font-bold">{username}</span></div>
              <div className="flex justify-between"><span className="text-slate-400">Balance:</span><span className="font-bold text-yellow-400">{balance.toFixed(2)} ü™ô</span></div>
              <div className="flex justify-between"><span className="text-slate-400">Wagered:</span><span className="font-bold">{totalWagered.toFixed(2)} ü™ô</span></div>
              <div className="flex justify-between"><span className="text-slate-400">Rounds:</span><span className="font-bold">{roundId - 1}</span></div>
            </div>
          </div>

          <div className="bg-slate-800/50 border border-red-500/30 rounded-xl p-4">
            <h3 className="text-red-400 font-bold mb-3 flex items-center gap-2"><DollarSign className="w-4 h-4" />House</h3>
            <div className="space-y-2 text-sm">
              <div className="flex justify-between"><span className="text-slate-400">Profit:</span><span className="font-bold text-red-400">{houseProfit.toFixed(2)} ü™ô</span></div>
            </div>
          </div>

          <div className="bg-slate-800/50 border border-blue-500/30 rounded-xl p-4">
            <h3 className="text-cyan-400 font-bold mb-3">‚ö° Rules</h3>
            <div className="space-y-1 text-xs text-slate-400">
              <p>‚Ä¢ Min: 40, Max: 2,000 tokens</p>
              <p>‚Ä¢ Crash: 1.05x - 100x</p>
              <p>‚Ä¢ 6 sec betting phase</p>
              <p>‚Ä¢ Two betting slots</p>
            </div>
          </div>
        </div>
      </div>

      {showSettings && (
        <div className="fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50">
          <div className="bg-slate-800 border-2 border-cyan-500/50 rounded-2xl p-6 max-w-md w-full">
            <div className="flex items-center justify-between mb-6">
              <h2 className="text-2xl font-bold text-cyan-400">Settings</h2>
              <button onClick={() => setShowSettings(false)} className="text-slate-400 hover:text-white">‚úï</button>
            </div>
            <div className="space-y-4">
              <div className="pt-4 border-t border-slate-700">
                <h3 className="text-cyan-400 font-bold mb-2">Contact</h3>
                <p className="text-sm text-slate-400">graham@oriondevcore.com<br />+27 72 497 1810<br />www.oriondevcore.com</p>
              </div>
              <button onClick={() => { if (window.confirm('Logout?')) { setIsLoggedIn(false); setUsername(''); setBalance(1000); setActiveBet1(null); setActiveBet2(null); setRecentCrashes([]); setTotalWagered(0); setHouseProfit(0); setRoundId(1); }}} className="w-full bg-red-600 hover:bg-red-500 text-white font-bold py-2 rounded-lg">Logout</button>
            </div>
          </div>
        </div>
      )}

      <div className="fixed bottom-0 left-0 right-0 bg-slate-900/90 border-t border-blue-500/30 px-4 py-2">
        <div className="max-w-7xl mx-auto flex items-center justify-between text-xs text-slate-400">
          <div><span className="text-cyan-400 font-bold">ORION SURGE</span> ‚Ä¢ Token-based gaming</div>
          <div>‚ö° ORION DEV CORE</div>
        </div>
      </div>
    </div>
  );
};

export default OrionSurge;
  </script>
  
  <script>
    // Register service worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js')
        .then(reg => console.log('SW registered:', reg))
        .catch(err => console.log('SW registration failed:', err));
    }
  </script>
</body>
</html>